import{j as e,r as l,c as p}from"./client-B2hCCc6G.js";import{a as x}from"./apiutils-B9LkjLcV.js";const g=({user:t,setUser:s,pass:n,setPass:r})=>e.jsxs("div",{className:"user-pass-input",children:[e.jsx("input",{type:"text",id:"username",name:"username",placeholder:"Username",value:t,onChange:a=>s(a.target.value),required:!0}),e.jsx("input",{type:"password",id:"pin",name:"pin",placeholder:"PIN",inputMode:"numeric",value:n,onChange:a=>r(a.target.value),required:!0})]}),d=({label:t,checked:s,setChecked:n})=>e.jsx("div",{class:"login-checkbox",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:s,onChange:r=>n(r.target.checked)}),t]})}),h=({rememberUsername:t,setRememberUsername:s,rememberPin:n,setRememberPin:r})=>e.jsxs("div",{className:"login-checkboxes",children:[e.jsx(d,{label:"Remember Username",checked:t,setChecked:s}),e.jsx(d,{label:"Remember PIN",checked:n,setChecked:r})]}),j=({username:t,pin:s,rememberUsername:n,rememberPin:r})=>{async function a(){var i=t.toLowerCase().trim(),c=s.trim();if(i===""||c===""){alert("Username and PIN cannot be empty.");return}const o=await x.post("/account/login",{username:i,pin:c});if(o.status!=="success"){alert("Invalid username or PIN");return}n?localStorage.setItem("username",i):localStorage.removeItem("username"),r?localStorage.setItem("pin",c):localStorage.removeItem("pin"),o.type==="admin"?window.location.href="/admin":o.type==="user"?window.location.href="/user":alert("Unknown user type: "+o.type)}return e.jsx("div",{className:"login-button",children:e.jsx("button",{onClick:a,children:"Login"})})},b=()=>{const[t,s]=l.useState(""),[n,r]=l.useState(""),[a,i]=l.useState(!1),[c,o]=l.useState(!1);return l.useEffect(()=>{const m=localStorage.getItem("username");m&&(s(m),i(!0));const u=localStorage.getItem("pin");u&&(r(u),o(!0))},[]),e.jsxs("div",{className:"login-box",children:[e.jsx("h1",{children:"Login"}),e.jsx(g,{user:t,setUser:s,pass:n,setPass:r}),e.jsx(h,{rememberUsername:a,setRememberUsername:i,rememberPin:c,setRememberPin:o}),e.jsx(j,{username:t,pin:n,rememberUsername:a,rememberPin:c})]})};function f(){return e.jsx(b,{})}p.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(f,{})}));
